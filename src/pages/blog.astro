---
import BaseLayout from "../layouts/BaseLayout.astro";
import TitleCard from "../components/TitileCard.astro";
import { getCollectionOrderByDate, getWordCount } from "../utils/utils.ts";
const blogs = await getCollectionOrderByDate("blog", ({ data }) => {
  return data.published === true;
});
---

<BaseLayout>
  {
    blogs.map(async (blog) => {
      const { title, date, description } = blog.data;
      const wordNum = getWordCount(blog.body ? blog.body : "");
      return (
        <TitleCard title={title} wordNum={wordNum} date={date}>
          {description}
        </TitleCard>
      );
    })
  }
</BaseLayout>

<style is:global>
  * {
    box-sizing: border-box; /* 确保所有元素的宽高包含 padding 和 border */
  }
  html {
    scrollbar-gutter: stable; /* 防止滚动条导致页面宽度不一致 */
  }
  html body {
    margin: 0;
    padding: 0;
    height: 100%; /* 确保body和html占满全屏 */
    margin: 0;
  }
</style>
